# This workflow will request a screenshot of my kaggle profile from https://capture-website-api.herokuapp.com/

name: update-screenshot

on:
  schedule:
    - cron: "29 * * * *"

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        python-version: ["3.8", "3.9", "3.10"]

    steps:
    - uses: actions/checkout@v2
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v2
      with:
        python-version: ${{ matrix.python-version }}
#     - uses: browser-actions/setup-chrome@latest
#     - run: chrome --version
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        python -m pip install requests
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    - name: Capture image
      run: |
        cd ${GITHUB_WORKSPACE}/src/
            python main.py
    - name: ðŸš€ Deploy
      run: |
        git config user.name "${GITHUB_ACTOR}"
        git config user.email "${GITHUB_ACTOR}@users.noreply.github.com"
        git add .
        git commit -am "feat(auto generate): Updated content"
        git push --all -f https://${{ secrets.GITHUB_TOKEN }}@github.com/${GITHUB_REPOSITORY}.git
